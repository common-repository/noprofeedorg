/**
 * Twitter - http://twitter.com
 * Copyright (C) 2010 Twitter
 * Author: Dustin Diaz (dustin@twitter.com)
 *
 * V 2.2.5 Twitter search/profile/faves/list widget
 * http://twitter.com/widgets
 * For full documented source see http://twitter.com/javascripts/widgets/widget.js
 * Hosting and modifications of the original source IS allowed.
 *
 * Example usage:
   <script src="path/to/widget.js"></script>
   <script>
     new TWTR.Widget({
       type: 'search',
       search: "your search query", // includes all advanced search queries.
       width: 250,
       height: 350,
       interval: 6000,
       subject: "What's being said about...",
       title: "San Francisco",
       rpp: 30,
       footer: "Follow me",
       theme: {
         shell: {
           background: '#1deb25',
           color: '#ffffff'
         },
         tweets: {
           background: 'silver',
           color: 'blue',
           links: 'black'
         }
       },

       features: {
         avatars: true, // defaults to false for profile widget, but true for search & faves widget
         hashtags: true,
         timestamp: true,
         fullscreen: false, // ignores width and height and just goes full screen
         scrollbar: false,
         live: true,
         loop: true,
         behavior: 'default',
         dateformat: 'absolute', // defaults to relative (eg: 3 minutes ago)
         toptweets: true // only for search widget
       }
     }).render().start();
   </script>
 *
 *//**
  * @namespace TWTR public namespace for Twitter widget
  */TWTR=window.TWTR||{};if(!Array.forEach){Array.prototype.filter=function(e,t){var n=t||window,r=[];for(var i=0,s=this.length;i<s;++i){if(!e.call(n,this[i],i,this))continue;r.push(this[i])}return r};Array.prototype.indexOf=function(e,t){var t=t||0;for(var n=0;n<this.length;++n)if(this[n]===e)return n;return-1}}(function(){function e(e,t,n){for(var r=0,i=e.length;r<i;++r)t.call(n||window,e[r],r,e)}function t(e,t,n){this.el=e;this.prop=t;this.from=n.from;this.to=n.to;this.time=n.time;this.callback=n.callback;this.animDiff=this.to-this.from}function u(e){e=e||window.event;var t=e.target||e.srcElement,u,a,f,l,c;while(t&&t.nodeName.toLowerCase()!=="a")t=t.parentNode;if(t&&t.nodeName.toLowerCase()==="a"&&t.href){u=t.href.match(n);if(u){a=550;f=u[2]in r?420:560;l=Math.round(o/2-a/2);c=0;s>f&&(c=Math.round(s/2-f/2));window.open(t.href,"intent",i+",width="+a+",height="+f+",left="+l+",top="+c);e.returnValue=!1;e.preventDefault&&e.preventDefault()}}}if(TWTR&&TWTR.Widget)return;t.canTransition=function(){var e=document.createElement("twitter");e.style.cssText="-webkit-transition: all .5s linear;";return!!e.style.webkitTransitionProperty}();t.prototype._setStyle=function(e){switch(this.prop){case"opacity":this.el.style[this.prop]=e;this.el.style.filter="alpha(opacity="+e*100+")";break;default:this.el.style[this.prop]=e+"px"}};t.prototype._animate=function(){var e=this;this.now=new Date;this.diff=this.now-this.startTime;if(this.diff>this.time){this._setStyle(this.to);this.callback&&this.callback.call(this);clearInterval(this.timer);return}this.percentage=Math.floor(this.diff/this.time*100)/100;this.val=this.animDiff*this.percentage+this.from;this._setStyle(this.val)};t.prototype.start=function(){var e=this;this.startTime=new Date;this.timer=setInterval(function(){e._animate.call(e)},15)};TWTR.Widget=function(e){this.init(e)};(function(){function O(e,t,n){this.job=e;this.decayFn=t;this.interval=n;this.decayRate=1;this.decayMultiplier=1.25;this.maxDecayTime=18e4}function M(e,t,n){this.time=e||6e3;this.loop=t||!1;this.repeated=0;this.callback=n;this.haystack=[]}function _(e){function t(){return e.needle.metadata&&e.needle.metadata.result_type&&e.needle.metadata.result_type=="popular"?'<span class="twtr-popular">'+e.needle.metadata.recent_retweets+"+ recent retweets</span>":""}var n='<div class="twtr-tweet-wrap">         <div class="twtr-avatar">           <div class="twtr-img"><a target="_blank" href="http://twitter.com/intent/user?screen_name='+e.user+'"><img alt="'+e.user+' profile" src="'+o(e.avatar)+'"></a></div>         </div>         <div class="twtr-tweet-text">           <p>             <a target="_blank" href="http://twitter.com/intent/user?screen_name='+e.user+'" class="twtr-user">'+e.user+"</a> "+e.tweet+'             <em>            <a target="_blank" class="twtr-timestamp" time="'+e.timestamp+'" href="http://twitter.com/'+e.user+"/status/"+e.id+'">'+e.created_at+'</a> &middot;            <a target="_blank" class="twtr-reply" href="http://twitter.com/intent/tweet?in_reply_to='+e.id+'">reply</a> &middot;             <a target="_blank" class="twtr-rt" href="http://twitter.com/intent/retweet?tweet_id='+e.id+'">retweet</a> &middot;             <a target="_blank" class="twtr-fav" href="http://twitter.com/intent/favorite?tweet_id='+e.id+'">favorite</a>             </em> '+t()+"           </p>         </div>       </div>",r=document.createElement("div");r.id="tweet-id-"+ ++_._tweetCount;r.className="twtr-tweet";r.innerHTML=n;this.element=r}var n={},r=location.protocol.match(/https/),i=/^.+\/profile_images/,s="https://s3.amazonaws.com/twitter_production/profile_images",o=function(e){return r?e.replace(i,s):e},u={},a=function(e){var t=u[e];if(!t){t=new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)");u[e]=t}return t},f=function(e,t,n,r){var t=t||"*",n=n||document,i=[],s=n.getElementsByTagName(t),o=a(e);for(var u=0,f=s.length;u<f;++u)if(o.test(s[u].className)){i[i.length]=s[u];r&&r.call(s[u],s[u])}return i},l=function(){var e=navigator.userAgent;return{ie:e.match(/MSIE\s([^;]*)/)}}(),c=function(e){return typeof e=="string"?document.getElementById(e):e},h=function(e){return e.replace(/^\s+|\s+$/g,"")},p=function(){var e=self.innerHeight,t=document.compatMode;if(t||l.ie)e=t=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight;return e},d=function(e,t){var n=e.target||e.srcElement;return t(n)},v=function(e){try{return e&&3==e.nodeType?e.parentNode:e}catch(t){}},m=function(e){var t=e.relatedTarget;t||(e.type=="mouseout"?t=e.toElement:e.type=="mouseover"&&(t=e.fromElement));return v(t)},g=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},y=function(e){try{e.parentNode.removeChild(e)}catch(t){}},b=function(e){return e.firstChild},w=function(e){var t=m(e);while(t&&t!=this)try{t=t.parentNode}catch(n){t=this}return t!=this?!0:!1},E=function(){if(document.defaultView&&document.defaultView.getComputedStyle)return function(e,t){var n=null,r=document.defaultView.getComputedStyle(e,"");r&&(n=r[t]);var i=e.style[t]||n;return i};if(document.documentElement.currentStyle&&l.ie)return function(e,t){var n=e.currentStyle?e.currentStyle[t]:null;return e.style[t]||n}}(),S={has:function(e,t){return(new RegExp("(^|\\s)"+t+"(\\s|$)")).test(c(e).className)},add:function(e,t){this.has(e,t)||(c(e).className=h(c(e).className)+" "+t)},remove:function(e,t){this.has(e,t)&&(c(e).className=c(e).className.replace(new RegExp("(^|\\s)"+t+"(\\s|$)","g"),""))}},x={add:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,function(){n.call(e,window.event)})},remove:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)}},T=function(){function e(e){return parseInt(e.substring(0,2),16)}function t(e){return parseInt(e.substring(2,4),16)}function n(e){return parseInt(e.substring(4,6),16)}return function(r){return[e(r),t(r),n(r)]}}(),N={bool:function(e){return typeof e=="boolean"},def:function(e){return typeof e!="undefined"},number:function(e){return typeof e=="number"&&isFinite(e)},string:function(e){return typeof e=="string"},fn:function(e){return typeof e=="function"},array:function(e){return e?N.number(e.length)&&N.fn(e.splice):!1}},C=["January","February","March","April","May","June","July","August","September","October","November","December"],k=function(e){function o(){var e=new Date;return e.getDate()!=t.getDate()||e.getYear()!=t.getYear()||e.getMonth()!=t.getMonth()?" - "+C[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear():""}var t=new Date(e);l.ie&&(t=Date.parse(e.replace(/( \+)/," UTC$1")));var n="",r=function(){var e=t.getHours();if(e>0&&e<13){n="am";return e}if(e<1){n="am";return 12}n="pm";return e-12}(),i=t.getMinutes(),s=t.getSeconds();return r+":"+i+n+o()},L=function(e){var t=new Date,n=new Date(e);l.ie&&(n=Date.parse(e.replace(/( \+)/," UTC$1")));var r=t-n,i=1e3,s=i*60,o=s*60,u=o*24,a=u*7;return isNaN(r)||r<0?"":r<i*2?"right now":r<s?Math.floor(r/i)+" seconds ago":r<s*2?"about 1 minute ago":r<o?Math.floor(r/s)+" minutes ago":r<o*2?"about 1 hour ago":r<u?Math.floor(r/o)+" hours ago":r>u&&r<u*2?"yesterday":r<u*365?Math.floor(r/u)+" days ago":"over a year ago"},A={link:function(e){return e.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(e,t,n,r,i){var s=n.match(/w/)?"http://":"";return'<a class="twtr-hyperlink" target="_blank" href="'+s+t+'">'+(t.length>25?t.substr(0,24)+"...":t)+"</a>"+i})},at:function(e){return e.replace(/\B[@＠]([a-zA-Z0-9_]{1,20})/g,function(e,t){return'@<a target="_blank" class="twtr-atreply" href="http://twitter.com/intent/user?screen_name='+t+'">'+t+"</a>"})},list:function(e){return e.replace(/\B[@＠]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(e,t){return'@<a target="_blank" class="twtr-atreply" href="http://twitter.com/'+t+'">'+t+"</a>"})},hash:function(e){return e.replace(/(^|\s+)#(\w+)/gi,function(e,t,n){return t+'<a target="_blank" class="twtr-hashtag" href="http://twitter.com/search?q=%23'+n+'">#'+n+"</a>"})},clean:function(e){return this.hash(this.at(this.list(this.link(e))))}};O.prototype={start:function(){this.stop().run();return this},stop:function(){this.worker&&window.clearTimeout(this.worker);return this},run:function(){var e=this;this.job(function(){e.decayRate=e.decayFn()?Math.max(1,e.decayRate/e.decayMultiplier):e.decayRate*e.decayMultiplier;var t=e.interval*e.decayRate;t=t>=e.maxDecayTime?e.maxDecayTime:t;t=Math.floor(t);e.worker=window.setTimeout(function(){e.run.call(e)},t)})},destroy:function(){this.stop();this.decayRate=1;return this}};M.prototype={set:function(e){this.haystack=e},add:function(e){this.haystack.unshift(e)},start:function(){if(this.timer)return this;this._job();var e=this;this.timer=setInterval(function(){e._job.call(e)},this.time);return this},stop:function(){if(this.timer){window.clearInterval(this.timer);this.timer=null}return this},_next:function(){var e=this.haystack.shift();e&&this.loop&&this.haystack.push(e);return e||null},_job:function(){var e=this._next();e&&this.callback(e);return this}};_._tweetCount=0;n.loadStyleSheet=function(e,t){if(!TWTR.Widget.loadingStyleSheet){TWTR.Widget.loadingStyleSheet=!0;var n=document.createElement("link");n.href=e;n.rel="stylesheet";n.type="text/css";document.getElementsByTagName("head")[0].appendChild(n);var r=setInterval(function(){var e=E(t,"position");if(e=="relative"){clearInterval(r);r=null;TWTR.Widget.hasLoadedStyleSheet=!0}},50)}};(function(){var e=!1;n.css=function(t){function i(){document.getElementsByTagName("head")[0].appendChild(n)}var n=document.createElement("style");n.type="text/css";if(l.ie)n.styleSheet.cssText=t;else{var r=document.createDocumentFragment();r.appendChild(document.createTextNode(t));n.appendChild(r)}!l.ie||e?i():window.attachEvent("onload",function(){e=!0;i()})}})();TWTR.Widget.isLoaded=!1;TWTR.Widget.loadingStyleSheet=!1;TWTR.Widget.hasLoadedStyleSheet=!1;TWTR.Widget.WIDGET_NUMBER=0;TWTR.Widget.matches={mentions:/^@[a-zA-Z0-9_]{1,20}\b/,any_mentions:/\b@[a-zA-Z0-9_]{1,20}\b/};TWTR.Widget.jsonP=function(e,t){var n=document.createElement("script"),r=document.getElementsByTagName("head")[0];n.type="text/javascript";n.src=e;r.insertBefore(n,r.firstChild);t(n);return n};TWTR.Widget.prototype=function(){var i=r?"https://":"http://",s=window.location.hostname.match(/twitter\.com/)?window.location.hostname+":"+window.location.port:"twitter.com",u=i+"search."+s+"/search.",a=i+"api."+s+"/1/statuses/user_timeline.",h=i+s+"/favorites/",d=i+"api."+s+"/1/",v=25e3,m=r?"https://twitter-widgets.s3.amazonaws.com/j/1/default.gif":"http://widgets.twimg.com/j/1/default.gif";return{init:function(e){var t=this;this._widgetNumber=++TWTR.Widget.WIDGET_NUMBER;TWTR.Widget["receiveCallback_"+this._widgetNumber]=function(e){t._prePlay.call(t,e)};this._cb="TWTR.Widget.receiveCallback_"+this._widgetNumber;this.opts=e;this._base=u;this._isRunning=!1;this._hasOfficiallyStarted=!1;this._hasNewSearchResults=!1;this._rendered=!1;this._profileImage=!1;this._isCreator=!!e.creator;this._setWidgetType(e.type);this.timesRequested=0;this.runOnce=!1;this.newResults=!1;this.results=[];this.jsonMaxRequestTimeOut=19e3;this.showedResults=[];this.sinceId=1;this.source="TWITTERINC_WIDGET";this.id=e.id||"twtr-widget-"+this._widgetNumber;this.tweets=0;this.setDimensions(e.width,e.height);this.interval=e.interval||6e3;this.format="json";this.rpp=e.rpp||50;this.subject=e.subject||"";this.title=e.title||"";this.setFooterText(e.footer);this.setSearch(e.search);this._setUrl();this.theme=e.theme?e.theme:this._getDefaultTheme();e.id||document.write('<div class="twtr-widget" id="'+this.id+'"></div>');this.widgetEl=c(this.id);e.id&&S.add(this.widgetEl,"twtr-widget");e.version>=2&&!TWTR.Widget.hasLoadedStyleSheet&&n.loadStyleSheet("/wp-content/plugins/noprofeedorg/css/npf-twitter.css",this.widgetEl);this.occasionalJob=new O(function(e){t.decay=e;t._getResults.call(t)},function(){return t._decayDecider.call(t)},v);this._ready=N.fn(e.ready)?e.ready:function(){};this._isRelativeTime=!0;this._tweetFilter=!1;this._avatars=!0;this._isFullScreen=!1;this._isLive=!0;this._isScroll=!1;this._loop=!0;this._showTopTweets=this._isSearchWidget?!0:!1;this._behavior="default";this.setFeatures(this.opts.features);this.intervalJob=new M(this.interval,this._loop,function(e){t._normalizeTweet(e)});return this},setDimensions:function(e,t){this.wh=e&&t?[e,t]:[250,300];e=="auto"||e=="100%"?this.wh[0]="100%":this.wh[0]=(this.wh[0]<150?150:this.wh[0])+"px";this.wh[1]=(this.wh[1]<100?100:this.wh[1])+"px";return this},setRpp:function(e){var e=parseInt(e);this.rpp=N.number(e)&&e>0&&e<=100?e:30;return this},_setWidgetType:function(e){this._isSearchWidget=!1,this._isProfileWidget=!1,this._isFavsWidget=!1,this._isListWidget=!1;switch(e){case"profile":this._isProfileWidget=!0;break;case"search":this._isSearchWidget=!0,this.search=this.opts.search;break;case"faves":case"favs":this._isFavsWidget=!0;break;case"list":case"lists":this._isListWidget=!0}return this},setFeatures:function(e){if(e){N.def(e.filters)&&(this._tweetFilter=e.filters);N.def(e.dateformat)&&(this._isRelativeTime=e.dateformat!=="absolute");if(N.def(e.fullscreen)&&N.bool(e.fullscreen)&&e.fullscreen){this._isFullScreen=!0;this.wh[0]="100%";this.wh[1]=p()-90+"px";var t=this;x.add(window,"resize",function(e){t.wh[1]=p();t._fullScreenResize()})}N.def(e.loop)&&N.bool(e.loop)&&(this._loop=e.loop);if(N.def(e.behavior)&&N.string(e.behavior))switch(e.behavior){case"all":this._behavior="all";break;case"preloaded":this._behavior="preloaded";break;default:this._behavior="default"}if(N.def(e.toptweets)&&N.bool(e.toptweets)){this._showTopTweets=e.toptweets;var r=this._showTopTweets?"inline-block":"none";n.css("#"+this.id+" .twtr-popular { display: "+r+"; }")}if(!N.def(e.toptweets)){this._showTopTweets=!0;var r=this._showTopTweets?"inline-block":"none";n.css("#"+this.id+" .twtr-popular { display: "+r+"; }")}if(N.def(e.avatars)&&N.bool(e.avatars))if(!e.avatars){n.css("#"+this.id+" .twtr-avatar, #"+this.id+" .twtr-user { display: none; } "+"#"+this.id+" .twtr-tweet-text { margin-left: 0; }");this._avatars=!1}else{var i=this._isFullScreen?"90px":"40px";n.css("#"+this.id+" .twtr-avatar { display: block; } #"+this.id+" .twtr-user { display: inline; } "+"#"+this.id+" .twtr-tweet-text { margin-left: "+i+"; }");this._avatars=!0}else if(this._isProfileWidget){this.setFeatures({avatars:!1});this._avatars=!1}else{this.setFeatures({avatars:!0});this._avatars=!0}N.def(e.hashtags)&&N.bool(e.hashtags)&&(e.hashtags?"":n.css("#"+this.id+" a.twtr-hashtag { display: none; }"));if(N.def(e.timestamp)&&N.bool(e.timestamp)){var s=e.timestamp?"block":"none";n.css("#"+this.id+" em { display: "+s+"; }")}N.def(e.live)&&N.bool(e.live)&&(this._isLive=e.live);N.def(e.scrollbar)&&N.bool(e.scrollbar)&&(this._isScroll=e.scrollbar)}else{if(this._isProfileWidget){this.setFeatures({avatars:!1});this._avatars=!1}(this._isProfileWidget||this._isFavsWidget)&&this.setFeatures({behavior:"all"})}return this},_fullScreenResize:function(){var e=f("twtr-timeline","div",document.body,function(e){e.style.height=p()-90+"px"})},setTweetInterval:function(e){this.interval=e;return this},setBase:function(e){this._base=e;return this},setUser:function(e,t){this.username=e;this.realname=t||" ";this._isFavsWidget?this.setBase(h+e+"."):this._isProfileWidget&&this.setBase(a+this.format+"?screen_name="+e);this.setSearch(" ");return this},setList:function(e,t){this.listslug=t.replace(/ /g,"-").toLowerCase();this.username=e;this.setBase(d+e+"/lists/"+this.listslug+"/statuses.");this.setSearch(" ");return this},setProfileImage:function(e){this._profileImage=e;this.byClass("twtr-profile-img","img").src=o(e);this.byClass("twtr-profile-img-anchor","a").href="http://twitter.com/intent/user?screen_name="+this.username;return this},setTitle:function(e){this.title=e;this.widgetEl.getElementsByTagName("h3")[0].innerHTML=this.title;return this},setCaption:function(e){this.subject=e;this.widgetEl.getElementsByTagName("h4")[0].innerHTML=this.subject;return this},setFooterText:function(e){this.footerText=N.def(e)&&N.string(e)?e:"Join the conversation";this._rendered&&(this.byClass("twtr-join-conv","a").innerHTML=this.footerText);return this},setSearch:function(e){this.searchString=e||"";this.search=encodeURIComponent(this.searchString);this._setUrl();if(this._rendered){var t=this.byClass("twtr-join-conv","a");t.href="http://twitter.com/"+this._getWidgetPath()}return this},_getWidgetPath:function(){return this._isProfileWidget?this.username:this._isFavsWidget?this.username+"/favorites":this._isListWidget?this.username+"/lists/"+this.listslug:"#search?q="+this.search},_setUrl:function(){function t(){return"&"+ +(new Date)+"=cachebust"}function n(){return e.sinceId==1?"":"&since_id="+e.sinceId+"&refresh=true"}var e=this;if(this._isProfileWidget)this.url=this._base+"&callback="+this._cb+"&include_rts=true"+"&count="+this.rpp+n()+"&clientsource="+this.source;else if(this._isFavsWidget||this._isListWidget)this.url=this._base+this.format+"?callback="+this._cb+n()+"&include_rts=true"+"&clientsource="+this.source;else{this.url=this._base+this.format+"?q="+this.search+"&include_rts=true"+"&callback="+this._cb+"&rpp="+this.rpp+n()+"&clientsource="+this.source;this.runOnce||(this.url+="&result_type=mixed")}this.url+=t();return this},_getRGB:function(e){return T(e.substring(1,7))},setTheme:function(e,t){var r=this,i=" !important",s=window.location.hostname.match(/twitter\.com/)&&window.location.pathname.match(/goodies/);if(t||s)i="";this.theme={shell:{background:function(){return e.shell.background||r._getDefaultTheme().shell.background}(),color:function(){return e.shell.color||r._getDefaultTheme().shell.color}()},tweets:{background:function(){return e.tweets.background||r._getDefaultTheme().tweets.background}(),color:function(){return e.tweets.color||r._getDefaultTheme().tweets.color}(),links:function(){return e.tweets.links||r._getDefaultTheme().tweets.links}()}};var o="#"+this.id+" .twtr-doc,                      #"+this.id+" .twtr-hd a,                      #"+this.id+" h3,                      #"+this.id+" h4,                      #"+this.id+" .twtr-popular {            background-color: "+this.theme.shell.background+i+";            color: "+this.theme.shell.color+i+";          }          #"+this.id+" .twtr-popular {            color: "+this.theme.tweets.color+i+";            background-color: rgba("+this._getRGB(this.theme.shell.background)+", .3)"+i+";          }          #"+this.id+" .twtr-tweet a {            color: "+this.theme.tweets.links+i+";          }          #"+this.id+" .twtr-bd, #"+this.id+" .twtr-timeline i a,           #"+this.id+" .twtr-bd p {            color: "+this.theme.tweets.color+i+";          }          #"+this.id+" .twtr-new-results,           #"+this.id+" .twtr-results-inner,           #"+this.id+" .twtr-timeline {            background: "+this.theme.tweets.background+i+";          }";l.ie&&(o+="#"+this.id+" .twtr-tweet { background: "+this.theme.tweets.background+i+"; }");n.css(o);return this},byClass:function(e,t,n){var r=f(e,t,c(this.id));return n?r:r[0]},render:function(){var e=this;if(!TWTR.Widget.hasLoadedStyleSheet){window.setTimeout(function(){e.render.call(e)},50);return this}this.setTheme(this.theme,this._isCreator);this._isProfileWidget&&S.add(this.widgetEl,"twtr-widget-profile");this._isScroll&&S.add(this.widgetEl,"twtr-scroll");!this._isLive&&!this._isScroll&&(this.wh[1]="auto");this._isSearchWidget&&this._isFullScreen&&(document.title="Twitter search: "+escape(this.searchString));this.widgetEl.innerHTML=this._getWidgetHtml();var t=this.byClass("twtr-timeline","div");if(this._isLive&&!this._isFullScreen){var n=function(t){if(e._behavior==="all")return;w.call(this,t)&&e.pause.call(e)},r=function(t){if(e._behavior==="all")return;w.call(this,t)&&e.resume.call(e)};this.removeEvents=function(){x.remove(t,"mouseover",n);x.remove(t,"mouseout",r)};x.add(t,"mouseover",n);x.add(t,"mouseout",r)}this._rendered=!0;this._ready();return this},removeEvents:function(){},_getDefaultTheme:function(){return{shell:{background:"#8ec1da",color:"#ffffff"},tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}}},_getWidgetHtml:function(){function t(){return e._isProfileWidget?'<a target="_blank" href="http://twitter.com/" class="twtr-profile-img-anchor"><img alt="profile" class="twtr-profile-img" src="'+m+'"></a>                      <h3 class="pippo"></h3>                      <h4></h4>':'<h3 class="pippo">'+e.title+"</h3><h4>"+e.subject+"</h4>"}function n(){return e._isFullScreen?" twtr-fullscreen":""}var e=this,i=r?"https://twitter-widgets.s3.amazonaws.com/i/widget-logo.png":"http://widgets.twimg.com/i/widget-logo.png";this._isFullScreen&&(i="https://twitter-widgets.s3.amazonaws.com/i/widget-logo-fullscreen.png");var s='<div class="twtr-doc'+n()+'" style="width: '+this.wh[0]+';">            <div class="twtr-hd">'+t()+'             </div>            <div class="twtr-bd">              <div class="twtr-timeline" style="height: '+this.wh[1]+';">                <div class="twtr-tweets">                  <div class="twtr-reference-tweet"></div>                  <!-- tweets show here -->                </div>              </div>            </div>            <div class="twtr-ft">              <div><a target="_blank" href="http://twitter.com"><img alt="" src="'+i+'"></a>                <span><a target="_blank" class="twtr-join-conv" style="color:'+this.theme.shell.color+'" href="http://twitter.com/'+this._getWidgetPath()+'">'+this.footerText+"</a></span>              </div>            </div>          </div>";return s},_appendTweet:function(e){this._insertNewResultsNumber();g(e,this.byClass("twtr-reference-tweet","div"));return this},_slide:function(e){var n=this,r=b(e).offsetHeight;this.runOnce&&(new t(e,"height",{from:0,to:r,time:500,callback:function(){n._fade.call(n,e)}})).start();return this},_fade:function(e){var n=this;if(t.canTransition){e.style.webkitTransition="opacity 0.5s ease-out";e.style.opacity=1;return this}(new t(e,"opacity",{from:0,to:1,time:500})).start();return this},_chop:function(){if(this._isScroll)return this;var e=this.byClass("twtr-tweet","div",!0),t=this.byClass("twtr-new-results","div",!0);if(e.length){for(var n=e.length-1;n>=0;n--){var r=e[n],i=parseInt(r.offsetTop);if(!(i>parseInt(this.wh[1])))break;y(r)}if(t.length>0){var s=t[t.length-1],o=parseInt(s.offsetTop);o>parseInt(this.wh[1])&&y(s)}}return this},_appendSlideFade:function(e){var t=e||this.tweet.element;this._chop()._appendTweet(t)._slide(t);return this},_createTweet:function(e){e.timestamp=e.created_at;e.created_at=this._isRelativeTime?L(e.created_at):k(e.created_at);this.tweet=new _(e);if(this._isLive&&this.runOnce){this.tweet.element.style.opacity=0;this.tweet.element.style.filter="alpha(opacity:0)";this.tweet.element.style.height="0"}return this},_getResults:function(){var e=this;this.timesRequested++;this.jsonRequestRunning=!0;this.jsonRequestTimer=window.setTimeout(function(){if(e.jsonRequestRunning){clearTimeout(e.jsonRequestTimer);e.jsonRequestTimer=null}e.jsonRequestRunning=!1;y(e.scriptElement);e.newResults=!1;e.decay()},this.jsonMaxRequestTimeOut);TWTR.Widget.jsonP(e.url,function(t){e.scriptElement=t})},clear:function(){var t=this.byClass("twtr-tweet","div",!0),n=this.byClass("twtr-new-results","div",!0);t=t.concat(n);e(t,function(e){y(e)});return this},_sortByMagic:function(e){var t=this;if(this._tweetFilter){this._tweetFilter.negatives&&(e=e.filter(function(e){if(!t._tweetFilter.negatives.test(e.text))return e}));this._tweetFilter.positives&&(e=e.filter(function(e){if(t._tweetFilter.positives.test(e.text))return e}))}switch(this._behavior){case"all":this._sortByLatest(e);break;case"preloaded":default:this._sortByDefault(e)}if(this._isLive&&this._behavior!=="all"){this.intervalJob.set(this.results);this.intervalJob.start()}return this},_loadTopTweetsAtTop:function(t){var n=[],r=[],i=[];e(t,function(e){e.metadata&&e.metadata.result_type&&e.metadata.result_type=="popular"?r.push(e):n.push(e)});var s=r.concat(n);return s},_sortByLatest:function(e){this.results=e;this.results=this.results.slice(0,this.rpp);this.results=this._loadTopTweetsAtTop(this.results);this.results.reverse();return this},_sortByDefault:function(t){var n=this,r=function(e){return(new Date(e)).getTime()};this.results.unshift.apply(this.results,t);e(this.results,function(e){e.views||(e.views=0)});this.results.sort(function(e,t){return r(e.created_at)>r(t.created_at)?-1:r(e.created_at)<r(t.created_at)?1:0});this.results=this.results.slice(0,this.rpp);this.results=this._loadTopTweetsAtTop(this.results);var i=this.results;this.results=this.results.sort(function(e,t){return e.views<t.views?-1:e.views>t.views?1:0});this._isLive||this.results.reverse()},_prePlay:function(e){if(this.jsonRequestTimer){clearTimeout(this.jsonRequestTimer);this.jsonRequestTimer=null}l.ie||y(this.scriptElement);if(e.error)this.newResults=!1;else if(e.results&&e.results.length>0){this.response=e;this.newResults=!0;this.sinceId=e.max_id_str;this._sortByMagic(e.results);this.isRunning()&&this._play()}else if((this._isProfileWidget||this._isFavsWidget||this._isListWidget)&&N.array(e)&&e.length){this.newResults=!0;if(!this._profileImage&&this._isProfileWidget){var t=e[0].user.screen_name;this.setProfileImage(e[0].user.profile_image_url);this.setTitle(e[0].user.name);this.setCaption('<a target="_blank" href="http://twitter.com/intent/user?screen_name='+t+'">'+t+"</a>")}this.sinceId=e[0].id_str;this._sortByMagic(e);this.isRunning()&&this._play()}else this.newResults=!1;this._setUrl();this._isLive&&this.decay()},_play:function(){var t=this;this.runOnce&&(this._hasNewSearchResults=!0);this._avatars&&this._preloadImages(this.results);this._isRelativeTime&&(this._behavior=="all"||this._behavior=="preloaded")&&e(this.byClass("twtr-timestamp","a",!0),function(e){e.innerHTML=L(e.getAttribute("time"))});if(!this._isLive||this._behavior=="all"||this._behavior=="preloaded"){e(this.results,function(e){e.retweeted_status&&(e=e.retweeted_status);if(t._isProfileWidget){e.from_user=e.user.screen_name;e.profile_image_url=e.user.profile_image_url}if(t._isFavsWidget||t._isListWidget){e.from_user=e.user.screen_name;e.profile_image_url=e.user.profile_image_url}e.id=e.id_str;t._createTweet({id:e.id,user:e.from_user,tweet:A.clean(e.text),avatar:e.profile_image_url,created_at:e.created_at,needle:e});var n=t.tweet.element;t._behavior=="all"?t._appendSlideFade(n):t._appendTweet(n)});if(this._behavior!="preloaded")return this}return this},_normalizeTweet:function(e){var t=this;e.views++;if(this._isProfileWidget){e.from_user=t.username;e.profile_image_url=e.user.profile_image_url}if(this._isFavsWidget||this._isListWidget){e.from_user=e.user.screen_name;e.profile_image_url=e.user.profile_image_url}this._isFullScreen&&(e.profile_image_url=e.profile_image_url.replace(/_normal\./,"_bigger."));e.id=e.id_str;this._createTweet({id:e.id,user:e.from_user,tweet:A.clean(e.text),avatar:e.profile_image_url,created_at:e.created_at,needle:e})._appendSlideFade()},_insertNewResultsNumber:function(){if(!this._hasNewSearchResults){this._hasNewSearchResults=!1;return}if(this.runOnce&&this._isSearchWidget){var e=this.response.total>this.rpp?this.response.total:this.response.results.length,t=e>1?"s":"",n=this.response.warning&&this.response.warning.match(/adjusted since_id/)?"more than":"",r=document.createElement("div");S.add(r,"twtr-new-results");r.innerHTML='<div class="twtr-results-inner"> &nbsp; </div><div class="twtr-results-hr"> &nbsp; </div><span>'+n+" <strong>"+e+"</strong> new tweet"+t+"</span>";g(r,this.byClass("twtr-reference-tweet","div"));this._hasNewSearchResults=!1}},_preloadImages:function(t){this._isProfileWidget||this._isFavsWidget||this._isListWidget?e(t,function(e){var t=new Image;t.src=o(e.user.profile_image_url)}):e(t,function(e){(new Image).src=o(e.profile_image_url)})},_decayDecider:function(){var e=!1;if(!this.runOnce){this.runOnce=!0;e=!0}else this.newResults&&(e=!0);return e},start:function(){var e=this;if(!this._rendered){setTimeout(function(){e.start.call(e)},50);return this}this._isLive?this.occasionalJob.start():this._getResults();this._isRunning=!0;this._hasOfficiallyStarted=!0;return this},stop:function(){this.occasionalJob.stop();this.intervalJob&&this.intervalJob.stop();this._isRunning=!1;return this},pause:function(){if(this.isRunning()&&this.intervalJob){this.intervalJob.stop();S.add(this.widgetEl,"twtr-paused");this._isRunning=!1}if(this._resumeTimer){clearTimeout(this._resumeTimer);this._resumeTimer=null}return this},resume:function(){var e=this;!this.isRunning()&&this._hasOfficiallyStarted&&this.intervalJob&&(this._resumeTimer=window.setTimeout(function(){e.intervalJob.start();e._isRunning=!0;S.remove(e.widgetEl,"twtr-paused")},2e3));return this},isRunning:function(){return this._isRunning},destroy:function(){this.stop();this.clear();this.runOnce=!1;this._hasOfficiallyStarted=!1;this._profileImage=!1;this._isLive=!0;this._tweetFilter=!1;this._isScroll=!1;this.newResults=!1;this._isRunning=!1;this.sinceId=1;this.results=[];this.showedResults=[];this.occasionalJob.destroy();this.jsonRequestRunning&&clearTimeout(this.jsonRequestTimer);S.remove(this.widgetEl,"twtr-scroll");this.removeEvents();return this}}}()})();var n=/twitter\.com(\:\d{2,4})?\/intent\/(\w+)/,r={tweet:!0,retweet:!0,favorite:!0},i="scrollbars=yes,resizable=yes,toolbar=no,location=yes",s=screen.height,o=screen.width;document.addEventListener?document.addEventListener("click",u,!1):document.attachEvent&&document.attachEvent("onclick",u)})();